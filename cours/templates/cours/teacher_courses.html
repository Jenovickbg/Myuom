{% extends 'users/base.html' %}
{% load static %}

{% block title %}Mes Cours - MyUOM{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0" style="color: var(--uom-blue);">Mes Cours</h2>
    <div>
      <a class="btn btn-uom-primary" href="{% url 'travaux:teacher_cours_selection' %}">
        <i class="bi bi-plus-circle"></i> Créer un Travail
      </a>
    </div>
  </div>
  
  <!-- Information -->
  <div class="alert alert-info mb-4">
    <i class="bi bi-info-circle"></i>
    <strong>Mes cours :</strong> 
    Consultez vos cours et gérez les TP/TD et supports associés.
  </div>

  {% if cours %}
    <div class="card card-uom">
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Code</th>
                <th>Titre</th>
                <th>Type</th>
                <th>Niveau</th>
                <th>Filière</th>
                <th>Période</th>
                <th>Statut</th>
                <th class="text-end">Actions</th>
              </tr>
            </thead>
            <tbody>
              {% for c in cours %}
              <tr>
                <td>
                  <span class="badge bg-primary">{{ c.code }}</span>
                </td>
                <td>
                  <strong>{{ c.titre }}</strong>
                  {% if c.description %}
                    <br><small class="text-muted">{{ c.description|truncatewords:15 }}</small>
                  {% endif %}
                </td>
                <td>
                  <span class="badge bg-info">{{ c.get_type_cours_display }}</span>
                </td>
                <td>
                  <span class="badge bg-secondary">{{ c.get_niveau_display }}</span>
                </td>
                <td>
                  <span class="text-muted">{{ c.filiere|truncatechars:20 }}</span>
                </td>
                <td>
                  <small>{{ c.date_debut|date:"d/m/Y" }} - {{ c.date_fin|date:"d/m/Y" }}</small>
                </td>
                <td>
                  {% if c.is_actif %}
                    <span class="badge bg-success">Actif</span>
                  {% else %}
                    <span class="badge bg-danger">Inactif</span>
                  {% endif %}
                  {% if c.is_visible_etudiants %}
                    <br><small class="text-success">Visible étudiants</small>
                  {% else %}
                    <br><small class="text-warning">Masqué</small>
                  {% endif %}
                </td>
                <td class="text-end">
                  <a href="{% url 'cours:teacher_cours_detail' c.id %}" class="btn btn-uom-primary btn-sm">
                    <i class="bi bi-eye"></i> Voir le cours
                  </a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  {% else %}
    <div class="text-center">
      <div class="card card-uom">
        <div class="card-body">
          <i class="bi bi-book" style="font-size: 3rem; color: var(--uom-gray);"></i>
          <h4 class="mt-3" style="color: var(--uom-gray);">Aucun cours trouvé</h4>
          <p class="text-muted">Vous n'avez pas encore de cours assignés.</p>
          <a href="{% url 'cours:admin_cours_list' %}" class="btn btn-uom-primary">
            <i class="bi bi-plus-circle"></i> Créer un Cours
          </a>
        </div>
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}